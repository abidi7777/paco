"use strict";function _createForOfIteratorHelper(r,e){var t,n,o,a,u="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(u)return n=!(t=!0),{s:function(){u=u.call(r)},n:function(){var r=u.next();return t=r.done,r},e:function(r){n=!0,o=r},f:function(){try{t||null==u.return||u.return()}finally{if(n)throw o}}};if(Array.isArray(r)||(u=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length)return u&&(r=u),a=0,{s:e=function(){},n:function(){return a>=r.length?{done:!0}:{done:!1,value:r[a++]}},e:function(r){throw r},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,e){var t;if(r)return"string"==typeof r?_arrayLikeToArray(r,e):"Map"===(t="Object"===(t=Object.prototype.toString.call(r).slice(8,-1))&&r.constructor?r.constructor.name:t)||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,e):void 0}function _arrayLikeToArray(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function ownKeys(e,r){var t,n=Object.keys(e);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(e),r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)),n}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function _createClass(r,e,t){return e&&_defineProperties(r.prototype,e),t&&_defineProperties(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var Paco=function(){function n(r){if(_classCallCheck(this,n),"function"!=typeof r)throw new TypeError("transformer must be a function");this.transformer=r}return _createClass(n,[{key:"run",value:function(r){r=Object.freeze({index:0,result:null,isError:!1,error:null,target:r});return this.transformer(r)}},{key:"chain",value:function(e){var t=this;return new n(function(r){r=t.transformer(r);return r.isError?r:e(r.result).transformer(r)})}},{key:"map",value:function(e){var t=this;return new n(function(r){r=t.transformer(r);return r.isError?r:Object.freeze(_objectSpread(_objectSpread({},r),{},{result:e(r.result)}))})}},{key:"errorMap",value:function(e){var t=this;return new n(function(r){r=t.transformer(r);return r.isError?Object.freeze(_objectSpread(_objectSpread({},r),{},{error:e(r.error)})):r})}}],[{key:"many",value:function(o){return new n(function(r){if(r.isError)return r;for(var e=[],t=r,n=r;!(n=o.transformer(n)).isError;)t=n,e.push(t.result);return Object.freeze(_objectSpread(_objectSpread({},t),{},{result:e}))})}},{key:"sequence",value:function(a){return new n(function(r){if(r.isError)return r;var e,t=[],n=r,o=_createForOfIteratorHelper(a);try{for(o.s();!(e=o.n()).done;){if((n=e.value.transformer(n)).isError)break;t.push(n.result)}}catch(r){o.e(r)}finally{o.f()}return Object.freeze(_objectSpread(_objectSpread({},n),{},{result:t}))})}},{key:"choice",value:function(a){return new n(function(r){var e=r.index;if(r.isError)return r;var t,n=_createForOfIteratorHelper(a);try{for(n.s();!(t=n.n()).done;){var o=t.value.transformer(r);if(!o.isError)return o}}catch(r){n.e(r)}finally{n.f()}return Object.freeze(_objectSpread(_objectSpread({},r),{},{isError:!0,error:"choice: couldn't match with any of the given parsers @ ".concat(e)}))})}},{key:"between",value:function(e,t){return function(r){return n.sequence([e,r,t])}}}]),n}(),_default=("undefined"!=typeof window&&(window.Paco=Paco),Paco);exports.default=_default;